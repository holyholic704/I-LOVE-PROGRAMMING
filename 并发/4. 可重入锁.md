# 可重入锁

也叫做递归锁，一个线程在获取到某个锁后，可以再次获取该锁而不会被阻塞，其他线程尝试获取的话会被阻塞。使用可重入锁主要是为了同一线程多次获取同一个锁时，避免产生死锁

- 有多少次成功获取到锁，就要同样有多少次释放锁，否则其他线程是获取不到锁的

Java 中自带的锁都是可重入的，如 synchronized、ReentrantLock 等，如果需要不可重入的锁，得自己去定义一个

```java
public class Test {

    final static Object lock = new Object();

    public static void main(String[] args) {
        synchronized (lock) {
            System.out.println("第一次获取成功");
            synchronized (lock) {
                System.out.println("第二次获取成功");
            }
        }
    }
}
```

> 第一次获取成功
> 第二次获取成功

如果 synchronized 是不可重入的，则第二次获取时会产生死锁

## ReentrantLock



## 参考

